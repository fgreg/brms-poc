import com.miraca.eboss.demo.CaseMaster;
import com.miraca.eboss.demo.ChargeLine;

rule "88305 professional"
ruleflow-group "testtest"

dialect "mvel"

when
    cm : CaseMaster()
    item: ChargeLine(cpt == "88305", chargeType == "Professional" ) from cm.chargeLine
then
    insert (item);
    kcontext.getKnowledgeRuntime().getAgenda().getAgendaGroup( "Set Professional 88305" ).setFocus();
    //System.out.println ("matched on 88305 and Professional. Total # of QTY: " + cm.getFound() );
end

rule "Price for Professional 88305"

agenda-group "Set Professional 88305"
dialect "mvel"
lock-on-active true
when
   cm : CaseMaster()
   item : ChargeLine ()
then
    modify (item) {price = 100, totalPrice = item.getQty() * 100 };
    System.out.println ("Professional 88305 - Total Price Updated to this " + item.getTotalPrice() );
end


